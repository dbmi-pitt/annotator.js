<html>

  <body>


<!-- <script src="js/annotator-drug.js"></script> -->
<!-- <script src="js/annotator-drug-ddiEditor.js"></script> -->
<script src="js/annotator-drug-ddiV-ddiE.js"></script>

    <header>
      <h1>Annotator demonstration</h1>
    </header>

    <article>
      <div id="content">
      <p>
        He was an old man who fished alone in a skiff in the Gulf Stream and he
        had gone eighty-four days now without taking a fish. In the first forty
        days a boy had been with him. But after forty days without a fish the
        boy's parents had told him that the old man was now definitely and
        finally <em>salao</em>, which is the worst form of unlucky, and the boy
        had gone at their orders in another boat which caught three good fish
        the first week. It made the boy sad to see the old man come in each day
        with his skiff empty and he always went down to help him carry either
        the coiled lines or the gaff and harpoon and the sail that was furled
        around the mast. The sail was patched with flour sacks and, furled, it
        looked like the flag of permanent defeat.
      </p>
      <p>
        The old man was thin and gaunt with deep wrinkles in the back of his
        neck. The brown blotches of the benevolent skin cancer the sun brings
        from its reflection on the tropic sea were on his cheeks. The blotches
        ran well down the sides of his face and his hands had the deep-creased
        scars from handling heavy fish on the cords. But none of these scars
        were fresh. They were as old as erosions in a fishless desert.
      </p>
      <p>
        Everything about him was old except his eyes and they were the same
        color as the sea and were cheerful and undefeated.
      </p>
      <p>
        &quot;Santiago,&quot; the boy said to him as they climbed the bank from
        where the skiff was hauled up. &quot;I could go with you again. We've
        made some money.&quot;
      </p>

      
      <p>
        They sat on the Terrace and many of the fishermen made fun of the old
        man and he was not angry. Others, of the older fishermen, looked at him
        and were sad. But they did not show it and they spoke politely about the
        current and the depths they had drifted their lines at and the steady
        good weather and of what they had seen. The successful fishermen of that
        day were already in and had butchered their marlin out and carried them
        laid full length across two planks, with two men staggering at the end
        of each plank, to the fish house where they waited for the ice truck to
        carry them to the market in Havana. Those who had caught sharks had
        taken them to the shark factory on the other side of the cove where they
        were hoisted on a block and tackle, their livers removed, their fins cut
        off and their hides skinned out and their flesh cut into strips for
        salting.
      </p>

      
      <p>
        When the wind was in the east a smell came across the harbour from the
        shark factory; but today there was only the faint edge of the odour
        because the wind had backed into the north and then dropped off and it
        was pleasant and sunny on the Terrace.
      </p>
      </div>
    </article>

    <script>
      if (typeof annotator === 'undefined') {
        alert("Oops! it looks like you haven't built Annotator. " +
              "Either download a tagged release from GitHub, or build the " +
              "package by running `make`");
      } else {

	  var app = new annotator.App();
        var app1 = new annotator.App();
	  app.include(annotator.ui.main, {
      element: document.querySelector('#content'),

    });
          //app.include(annotator.storage.debug);
          app1.include(annotator.ui.ddimain, {
              element: document.querySelector('#content'),
              editorExtensions: [annotator.ui.tags.editorExtension],
              viewerExtensions: [annotator.ui.tags.viewerExtension]
          });

	  app.include(
              annotator.storage.http, {
	      prefix: 'http://127.0.0.1:5000'
	  }
              //annotator.Registry.prototype.getUtility(iface)
      );

          //app.include(helloWorld, {message: 'ddi plugin'
          //});

	  // app.include(addFieldsToEditor, {editor: annotator.ui.editor});


        //app.include(annotator.storage.debug);

        app1.include(
                annotator.storage.http, {
                  prefix: 'http://127.0.0.1:5000'
                }
                //annotator.Registry.prototype.getUtility(iface)
        );

        //app.include(helloWorld, {message: 'ddi plugin'
        //});

        // app.include(addFieldsToEditor, {editor: annotator.ui.editor});

        app1.start().then(function ()
        {app1.annotations.load();

          app1.ident.identity = 'bob';
        });

	  app.start().then(function () 
			   {app.annotations.load();
			   });
      }



    </script>

  </body>



</html>
